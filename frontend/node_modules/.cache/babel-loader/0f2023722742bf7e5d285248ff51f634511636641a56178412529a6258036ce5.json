{"ast":null,"code":"var _jsxFileName = \"E:\\\\nids-hybrid-system\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n/* eslint-disable no-unused-vars */\n// App.js — NIDS Dashboard with Clear & Graph Feature\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport axios from \"axios\";\nimport { useDropzone } from \"react-dropzone\";\nimport { RefreshCw, Zap, Disc, CloudOff, Loader, AlertTriangle, Trash2 } from \"lucide-react\";\nimport { Bar } from \"react-chartjs-2\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from \"chart.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst API_BASE_URL = \"http://localhost:8000\";\nconst API_BATCH_PREDICT_URL = `${API_BASE_URL}/predict_batch`;\nconst API_HEALTH_URL = `${API_BASE_URL}/`;\nconst App = () => {\n  _s();\n  const [results, setResults] = useState([]);\n  const [backendStatus, setBackendStatus] = useState(\"Disconnected\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [processedPackets, setProcessedPackets] = useState(0);\n  const [summary, setSummary] = useState({\n    total: 0,\n    benign: 0,\n    anomaly: 0,\n    suspiciousBenign: 0,\n    avgRisk: 0\n  });\n  const checkBackendStatus = useCallback(async () => {\n    try {\n      const response = await axios.get(API_HEALTH_URL);\n      if (response.status === 200) {\n        setBackendStatus(`Connected (${response.data.model_status || \"OK\"})`);\n      } else {\n        setBackendStatus(\"Connected (Error)\");\n      }\n    } catch {\n      setBackendStatus(\"Disconnected (Check Python Server)\");\n    }\n  }, []);\n  const formatNumber = (val, decimals = 2) => typeof val === \"number\" && !isNaN(val) ? val.toFixed(decimals) : String(val);\n  const generateDynamicSuggestion = (packet, isAnomaly) => {\n    if (!isAnomaly) {\n      if (packet.length < 100 && packet.duration < 1) return \"Normal short-duration traffic — no action needed.\";\n      if (packet.src_bytes < 100 && packet.dst_bytes < 100) return \"Unusually small packets detected — could indicate probing or scanning attempts.\";\n      if (packet.src_bytes < 500) return \"Benign low-data flow — typical background traffic.\";\n      return \"Benign activity — keep monitoring for unusual spikes.\";\n    }\n    if (packet.length > 1000) return \"High packet length detected — possible DDoS or flooding behavior.\";\n    if (packet.duration > 10) return \"Long connection duration — potential data exfiltration or slow scan.\";\n    if (packet.src_bytes > 5000) return \"High source bytes — may indicate data leakage attempts.\";\n    if (packet.dst_bytes > 5000) return \"High destination bytes — check for unusual data transfers.\";\n    return \"Anomalous pattern detected — investigate connection logs and thresholds.\";\n  };\n  const batchSize = 500;\n  const handleBatchResponse = (packetRows, responses) => {\n    const newEntries = responses.map((resp, idx) => {\n      const pkt = packetRows[idx];\n      return {\n        id: Date.now() + Math.random() + idx,\n        protocol: pkt.protocol,\n        length: pkt.length,\n        duration: pkt.duration,\n        src_bytes: pkt.src_bytes,\n        dst_bytes: pkt.dst_bytes,\n        prediction: resp.prediction === 1 || resp.prediction === \"Anomaly\" ? \"Anomaly\" : \"Benign\",\n        isAnomaly: resp.prediction === 1 || resp.prediction === \"Anomaly\",\n        isSuspiciousBenign: !(resp.prediction === 1 || resp.prediction === \"Anomaly\") && (pkt.length < 80 && pkt.duration < 0.5 || pkt.length > 1000 && pkt.src_bytes > 10000),\n        probabilities: resp.probabilities || null,\n        explanation: resp.top_features || null,\n        riskScore: typeof resp.risk_score === \"number\" ? resp.risk_score / 100 : resp.risk_score ? resp.risk_score : 0,\n        suggestion: resp.suggestion || generateDynamicSuggestion(pkt, resp.prediction === 1 || resp.prediction === \"Anomaly\"),\n        featuresUsed: resp.features_used || [\"protocol\", \"length\", \"duration\", \"src_bytes\", \"dst_bytes\"],\n        showExplanation: false\n      };\n    });\n    setResults(prev => [...newEntries, ...prev]);\n    setSummary(prev => {\n      const added = {\n        total: 0,\n        benign: 0,\n        anomaly: 0,\n        suspiciousBenign: 0,\n        avgRiskSum: 0\n      };\n      newEntries.forEach(e => {\n        added.total += 1;\n        if (e.isAnomaly) added.anomaly += 1;else added.benign += 1;\n        if (e.isSuspiciousBenign) added.suspiciousBenign += 1;\n        added.avgRiskSum += typeof e.riskScore === \"number\" ? e.riskScore : 0;\n      });\n      const newTotal = prev.total + added.total;\n      const newAvgRisk = newTotal === 0 ? 0 : (prev.avgRisk * prev.total + added.avgRiskSum) / newTotal;\n      return {\n        total: newTotal,\n        benign: prev.benign + added.benign,\n        anomaly: prev.anomaly + added.anomaly,\n        suspiciousBenign: prev.suspiciousBenign + added.suspiciousBenign,\n        avgRisk: newAvgRisk\n      };\n    });\n  };\n  const handleDrop = useCallback(async acceptedFiles => {\n    setIsLoading(true);\n    setProcessedPackets(0);\n    const file = acceptedFiles[0];\n    if (!file) {\n      setIsLoading(false);\n      return;\n    }\n    const text = await file.text();\n    const lines = text.trim().split(\"\\n\").filter(Boolean);\n    if (lines.length <= 1) {\n      setIsLoading(false);\n      return;\n    }\n    const rows = lines.slice(1).map(ln => ln.split(\",\").map(v => v.trim()));\n    const packets = [];\n    for (let i = 0; i < rows.length; i++) {\n      const vals = rows[i].map(v => parseFloat(v));\n      if (vals.length === 5 && !vals.some(x => Number.isNaN(x))) {\n        packets.push({\n          protocol: vals[0],\n          length: vals[1],\n          duration: vals[2],\n          src_bytes: vals[3],\n          dst_bytes: vals[4]\n        });\n      }\n    }\n    let offset = 0;\n    while (offset < packets.length) {\n      const chunk = packets.slice(offset, offset + batchSize);\n      try {\n        const resp = await axios.post(API_BATCH_PREDICT_URL, chunk, {\n          timeout: 60000\n        });\n        if (Array.isArray(resp.data)) {\n          handleBatchResponse(chunk, resp.data);\n        } else if (resp.data) {\n          handleBatchResponse(chunk, [resp.data]);\n        }\n      } catch (error) {\n        console.error(\"Batch failed, fallback to single POST:\", error);\n        for (let j = 0; j < chunk.length; j++) {\n          try {\n            const singleResp = await axios.post(`${API_BASE_URL}/predict`, chunk[j]);\n            handleBatchResponse([chunk[j]], [singleResp.data]);\n          } catch (err) {\n            console.error(\"Single record failed:\", err);\n          }\n        }\n      }\n      offset += batchSize;\n      setProcessedPackets(p => p + chunk.length);\n      await new Promise(r => setTimeout(r, 50));\n    }\n    setIsLoading(false);\n  }, [batchSize]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive,\n    open\n  } = useDropzone({\n    onDrop: handleDrop,\n    noClick: true,\n    accept: {\n      \"text/csv\": [\".csv\"]\n    }\n  });\n  useEffect(() => {\n    checkBackendStatus();\n    const interval = setInterval(checkBackendStatus, 5000);\n    return () => clearInterval(interval);\n  }, [checkBackendStatus]);\n  const getStatusStyles = () => {\n    if (backendStatus.includes(\"Connected\")) return \"bg-green-100 text-green-800 border-green-300\";\n    if (backendStatus.includes(\"Disconnected\")) return \"bg-red-100 text-red-800 border-red-300\";\n    return \"bg-yellow-100 text-yellow-800 border-yellow-300\";\n  };\n  const getStatusIcon = () => {\n    if (backendStatus.includes(\"Connected\")) return /*#__PURE__*/_jsxDEV(Zap, {\n      className: \"w-5 h-5 mr-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 53\n    }, this);\n    if (backendStatus.includes(\"Disconnected\")) return /*#__PURE__*/_jsxDEV(CloudOff, {\n      className: \"w-5 h-5 mr-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 56\n    }, this);\n    return /*#__PURE__*/_jsxDEV(Loader, {\n      className: \"w-5 h-5 mr-2 animate-spin\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 12\n    }, this);\n  };\n\n  // ✅ NEW: Clear results + summary\n  const clearAllData = () => {\n    setResults([]);\n    setSummary({\n      total: 0,\n      benign: 0,\n      anomaly: 0,\n      suspiciousBenign: 0,\n      avgRisk: 0\n    });\n  };\n\n  // ✅ NEW: Chart Data for Summary\n  const chartData = {\n    labels: [\"Benign\", \"Anomaly\", \"Suspicious Benign\"],\n    datasets: [{\n      label: \"Packet Count\",\n      data: [summary.benign, summary.anomaly, summary.suspiciousBenign],\n      backgroundColor: [\"#10B981\", \"#EF4444\", \"#F59E0B\"]\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen p-4 sm:p-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex flex-col sm:flex-row justify-between items-start sm:items-center pb-6 border-b\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-extrabold tracking-tight\",\n        children: \"NIDS Anomaly Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 mt-3 sm:mt-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-center px-3 py-1.5 rounded-full border text-sm font-medium ${getStatusStyles()}`,\n          children: [getStatusIcon(), \" \", backendStatus, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: checkBackendStatus,\n            className: \"ml-2 p-1 rounded-full hover:bg-opacity-50\",\n            children: /*#__PURE__*/_jsxDEV(RefreshCw, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: clearAllData,\n          className: \"flex items-center bg-red-500 text-white px-3 py-1.5 rounded-full text-sm hover:bg-red-600\",\n          children: [/*#__PURE__*/_jsxDEV(Trash2, {\n            className: \"w-4 h-4 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), \" Clear\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-1 border p-6 rounded-lg shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold mb-4 border-b pb-3\",\n          children: \"Analyze Network Packets\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ...getRootProps(),\n          className: `mt-4 border-2 border-dashed rounded-lg p-2 ${isDragActive ? \"border-indigo-500\" : \"border-gray-300\"}`,\n          style: {\n            cursor: isLoading ? \"wait\" : \"pointer\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ...getInputProps()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center p-8\",\n            children: [/*#__PURE__*/_jsxDEV(Disc, {\n              className: \"mx-auto h-12 w-12 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-sm\",\n              children: isDragActive ? \"Drop the CSV file here...\" : \"Drag or click to upload CSV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: open,\n              type: \"button\",\n              className: \"mt-4 bg-indigo-600 px-3 py-2 text-sm text-white rounded\",\n              children: \"Browse File\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 p-4 border rounded flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Loader, {\n            className: \"w-5 h-5 mr-3 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm\",\n            children: [\"Analyzing packets... (\", processedPackets, \" processed)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium mb-2\",\n            children: \"Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total Predictions:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: summary.total\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Benign:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: summary.benign\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Anomaly:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: summary.anomaly\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Suspicious Benign:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: summary.suspiciousBenign\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Avg Risk:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [(summary.avgRisk * 100).toFixed(1), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6\",\n            children: /*#__PURE__*/_jsxDEV(Bar, {\n              data: chartData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"gnakVmqnH1Q5wBiqkhDB57gIdog=\", false, function () {\n  return [useDropzone];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useDropzone","RefreshCw","Zap","Disc","CloudOff","Loader","AlertTriangle","Trash2","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","API_BASE_URL","API_BATCH_PREDICT_URL","API_HEALTH_URL","App","_s","results","setResults","backendStatus","setBackendStatus","isLoading","setIsLoading","processedPackets","setProcessedPackets","summary","setSummary","total","benign","anomaly","suspiciousBenign","avgRisk","checkBackendStatus","response","get","status","data","model_status","formatNumber","val","decimals","isNaN","toFixed","String","generateDynamicSuggestion","packet","isAnomaly","length","duration","src_bytes","dst_bytes","batchSize","handleBatchResponse","packetRows","responses","newEntries","map","resp","idx","pkt","id","Date","now","Math","random","protocol","prediction","isSuspiciousBenign","probabilities","explanation","top_features","riskScore","risk_score","suggestion","featuresUsed","features_used","showExplanation","prev","added","avgRiskSum","forEach","e","newTotal","newAvgRisk","handleDrop","acceptedFiles","file","text","lines","trim","split","filter","Boolean","rows","slice","ln","v","packets","i","vals","parseFloat","some","x","Number","push","offset","chunk","post","timeout","Array","isArray","error","console","j","singleResp","err","p","Promise","r","setTimeout","getRootProps","getInputProps","isDragActive","open","onDrop","noClick","accept","interval","setInterval","clearInterval","getStatusStyles","includes","getStatusIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","clearAllData","chartData","labels","datasets","label","backgroundColor","children","onClick","style","cursor","type","_c","$RefreshReg$"],"sources":["E:/nids-hybrid-system/frontend/src/App.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\n// App.js — NIDS Dashboard with Clear & Graph Feature\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { RefreshCw, Zap, Disc, CloudOff, Loader, AlertTriangle, Trash2 } from \"lucide-react\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\nconst API_BASE_URL = \"http://localhost:8000\";\r\nconst API_BATCH_PREDICT_URL = `${API_BASE_URL}/predict_batch`;\r\nconst API_HEALTH_URL = `${API_BASE_URL}/`;\r\n\r\nconst App = () => {\r\n  const [results, setResults] = useState([]);\r\n  const [backendStatus, setBackendStatus] = useState(\"Disconnected\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [processedPackets, setProcessedPackets] = useState(0);\r\n\r\n  const [summary, setSummary] = useState({\r\n    total: 0,\r\n    benign: 0,\r\n    anomaly: 0,\r\n    suspiciousBenign: 0,\r\n    avgRisk: 0,\r\n  });\r\n\r\n  const checkBackendStatus = useCallback(async () => {\r\n    try {\r\n      const response = await axios.get(API_HEALTH_URL);\r\n      if (response.status === 200) {\r\n        setBackendStatus(`Connected (${response.data.model_status || \"OK\"})`);\r\n      } else {\r\n        setBackendStatus(\"Connected (Error)\");\r\n      }\r\n    } catch {\r\n      setBackendStatus(\"Disconnected (Check Python Server)\");\r\n    }\r\n  }, []);\r\n\r\n  const formatNumber = (val, decimals = 2) =>\r\n    typeof val === \"number\" && !isNaN(val) ? val.toFixed(decimals) : String(val);\r\n\r\n  const generateDynamicSuggestion = (packet, isAnomaly) => {\r\n    if (!isAnomaly) {\r\n      if (packet.length < 100 && packet.duration < 1)\r\n        return \"Normal short-duration traffic — no action needed.\";\r\n      if (packet.src_bytes < 100 && packet.dst_bytes < 100)\r\n        return \"Unusually small packets detected — could indicate probing or scanning attempts.\";\r\n      if (packet.src_bytes < 500)\r\n        return \"Benign low-data flow — typical background traffic.\";\r\n      return \"Benign activity — keep monitoring for unusual spikes.\";\r\n    }\r\n\r\n    if (packet.length > 1000)\r\n      return \"High packet length detected — possible DDoS or flooding behavior.\";\r\n    if (packet.duration > 10)\r\n      return \"Long connection duration — potential data exfiltration or slow scan.\";\r\n    if (packet.src_bytes > 5000)\r\n      return \"High source bytes — may indicate data leakage attempts.\";\r\n    if (packet.dst_bytes > 5000)\r\n      return \"High destination bytes — check for unusual data transfers.\";\r\n    return \"Anomalous pattern detected — investigate connection logs and thresholds.\";\r\n  };\r\n\r\n  const batchSize = 500;\r\n\r\n  const handleBatchResponse = (packetRows, responses) => {\r\n    const newEntries = responses.map((resp, idx) => {\r\n      const pkt = packetRows[idx];\r\n      return {\r\n        id: Date.now() + Math.random() + idx,\r\n        protocol: pkt.protocol,\r\n        length: pkt.length,\r\n        duration: pkt.duration,\r\n        src_bytes: pkt.src_bytes,\r\n        dst_bytes: pkt.dst_bytes,\r\n        prediction: resp.prediction === 1 || resp.prediction === \"Anomaly\" ? \"Anomaly\" : \"Benign\",\r\n        isAnomaly: resp.prediction === 1 || resp.prediction === \"Anomaly\",\r\n        isSuspiciousBenign:\r\n          !(resp.prediction === 1 || resp.prediction === \"Anomaly\") &&\r\n          ((pkt.length < 80 && pkt.duration < 0.5) || (pkt.length > 1000 && pkt.src_bytes > 10000)),\r\n        probabilities: resp.probabilities || null,\r\n        explanation: resp.top_features || null,\r\n        riskScore:\r\n          typeof resp.risk_score === \"number\"\r\n            ? resp.risk_score / 100\r\n            : resp.risk_score\r\n            ? resp.risk_score\r\n            : 0,\r\n        suggestion:\r\n          resp.suggestion ||\r\n          generateDynamicSuggestion(pkt, resp.prediction === 1 || resp.prediction === \"Anomaly\"),\r\n        featuresUsed:\r\n          resp.features_used || [\"protocol\", \"length\", \"duration\", \"src_bytes\", \"dst_bytes\"],\r\n        showExplanation: false,\r\n      };\r\n    });\r\n\r\n    setResults((prev) => [...newEntries, ...prev]);\r\n\r\n    setSummary((prev) => {\r\n      const added = { total: 0, benign: 0, anomaly: 0, suspiciousBenign: 0, avgRiskSum: 0 };\r\n      newEntries.forEach((e) => {\r\n        added.total += 1;\r\n        if (e.isAnomaly) added.anomaly += 1;\r\n        else added.benign += 1;\r\n        if (e.isSuspiciousBenign) added.suspiciousBenign += 1;\r\n        added.avgRiskSum += typeof e.riskScore === \"number\" ? e.riskScore : 0;\r\n      });\r\n\r\n      const newTotal = prev.total + added.total;\r\n      const newAvgRisk =\r\n        newTotal === 0 ? 0 : (prev.avgRisk * prev.total + added.avgRiskSum) / newTotal;\r\n\r\n      return {\r\n        total: newTotal,\r\n        benign: prev.benign + added.benign,\r\n        anomaly: prev.anomaly + added.anomaly,\r\n        suspiciousBenign: prev.suspiciousBenign + added.suspiciousBenign,\r\n        avgRisk: newAvgRisk,\r\n      };\r\n    });\r\n  };\r\n\r\n  const handleDrop = useCallback(\r\n    async (acceptedFiles) => {\r\n      setIsLoading(true);\r\n      setProcessedPackets(0);\r\n      const file = acceptedFiles[0];\r\n      if (!file) {\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const text = await file.text();\r\n      const lines = text.trim().split(\"\\n\").filter(Boolean);\r\n      if (lines.length <= 1) {\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const rows = lines.slice(1).map((ln) => ln.split(\",\").map((v) => v.trim()));\r\n      const packets = [];\r\n      for (let i = 0; i < rows.length; i++) {\r\n        const vals = rows[i].map((v) => parseFloat(v));\r\n        if (vals.length === 5 && !vals.some((x) => Number.isNaN(x))) {\r\n          packets.push({\r\n            protocol: vals[0],\r\n            length: vals[1],\r\n            duration: vals[2],\r\n            src_bytes: vals[3],\r\n            dst_bytes: vals[4],\r\n          });\r\n        }\r\n      }\r\n\r\n      let offset = 0;\r\n      while (offset < packets.length) {\r\n        const chunk = packets.slice(offset, offset + batchSize);\r\n        try {\r\n          const resp = await axios.post(API_BATCH_PREDICT_URL, chunk, { timeout: 60000 });\r\n          if (Array.isArray(resp.data)) {\r\n            handleBatchResponse(chunk, resp.data);\r\n          } else if (resp.data) {\r\n            handleBatchResponse(chunk, [resp.data]);\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Batch failed, fallback to single POST:\", error);\r\n          for (let j = 0; j < chunk.length; j++) {\r\n            try {\r\n              const singleResp = await axios.post(`${API_BASE_URL}/predict`, chunk[j]);\r\n              handleBatchResponse([chunk[j]], [singleResp.data]);\r\n            } catch (err) {\r\n              console.error(\"Single record failed:\", err);\r\n            }\r\n          }\r\n        }\r\n        offset += batchSize;\r\n        setProcessedPackets((p) => p + chunk.length);\r\n        await new Promise((r) => setTimeout(r, 50));\r\n      }\r\n\r\n      setIsLoading(false);\r\n    },\r\n    [batchSize]\r\n  );\r\n\r\n  const { getRootProps, getInputProps, isDragActive, open } = useDropzone({\r\n    onDrop: handleDrop,\r\n    noClick: true,\r\n    accept: { \"text/csv\": [\".csv\"] },\r\n  });\r\n\r\n  useEffect(() => {\r\n    checkBackendStatus();\r\n    const interval = setInterval(checkBackendStatus, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [checkBackendStatus]);\r\n\r\n  const getStatusStyles = () => {\r\n    if (backendStatus.includes(\"Connected\")) return \"bg-green-100 text-green-800 border-green-300\";\r\n    if (backendStatus.includes(\"Disconnected\")) return \"bg-red-100 text-red-800 border-red-300\";\r\n    return \"bg-yellow-100 text-yellow-800 border-yellow-300\";\r\n  };\r\n\r\n  const getStatusIcon = () => {\r\n    if (backendStatus.includes(\"Connected\")) return <Zap className=\"w-5 h-5 mr-2\" />;\r\n    if (backendStatus.includes(\"Disconnected\")) return <CloudOff className=\"w-5 h-5 mr-2\" />;\r\n    return <Loader className=\"w-5 h-5 mr-2 animate-spin\" />;\r\n  };\r\n\r\n  // ✅ NEW: Clear results + summary\r\n  const clearAllData = () => {\r\n    setResults([]);\r\n    setSummary({ total: 0, benign: 0, anomaly: 0, suspiciousBenign: 0, avgRisk: 0 });\r\n  };\r\n\r\n  // ✅ NEW: Chart Data for Summary\r\n  const chartData = {\r\n    labels: [\"Benign\", \"Anomaly\", \"Suspicious Benign\"],\r\n    datasets: [\r\n      {\r\n        label: \"Packet Count\",\r\n        data: [summary.benign, summary.anomaly, summary.suspiciousBenign],\r\n        backgroundColor: [\"#10B981\", \"#EF4444\", \"#F59E0B\"],\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-4 sm:p-8\">\r\n      <header className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center pb-6 border-b\">\r\n        <h1 className=\"text-3xl font-extrabold tracking-tight\">NIDS Anomaly Dashboard</h1>\r\n        <div className=\"flex items-center space-x-2 mt-3 sm:mt-0\">\r\n          <div\r\n            className={`flex items-center px-3 py-1.5 rounded-full border text-sm font-medium ${getStatusStyles()}`}\r\n          >\r\n            {getStatusIcon()} {backendStatus}\r\n            <button onClick={checkBackendStatus} className=\"ml-2 p-1 rounded-full hover:bg-opacity-50\">\r\n              <RefreshCw className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n          <button\r\n            onClick={clearAllData}\r\n            className=\"flex items-center bg-red-500 text-white px-3 py-1.5 rounded-full text-sm hover:bg-red-600\"\r\n          >\r\n            <Trash2 className=\"w-4 h-4 mr-1\" /> Clear\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n        {/* LEFT PANEL */}\r\n        <div className=\"lg:col-span-1 border p-6 rounded-lg shadow\">\r\n          <h2 className=\"text-xl font-semibold mb-4 border-b pb-3\">Analyze Network Packets</h2>\r\n\r\n          <div\r\n            {...getRootProps()}\r\n            className={`mt-4 border-2 border-dashed rounded-lg p-2 ${\r\n              isDragActive ? \"border-indigo-500\" : \"border-gray-300\"\r\n            }`}\r\n            style={{ cursor: isLoading ? \"wait\" : \"pointer\" }}\r\n          >\r\n            <input {...getInputProps()} />\r\n            <div className=\"text-center p-8\">\r\n              <Disc className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n              <p className=\"mt-2 text-sm\">\r\n                {isDragActive ? \"Drop the CSV file here...\" : \"Drag or click to upload CSV\"}\r\n              </p>\r\n              <button\r\n                onClick={open}\r\n                type=\"button\"\r\n                className=\"mt-4 bg-indigo-600 px-3 py-2 text-sm text-white rounded\"\r\n              >\r\n                Browse File\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {isLoading && (\r\n            <div className=\"mt-4 p-4 border rounded flex items-center\">\r\n              <Loader className=\"w-5 h-5 mr-3 animate-spin\" />\r\n              <p className=\"text-sm\">Analyzing packets... ({processedPackets} processed)</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-6\">\r\n            <h3 className=\"text-lg font-medium mb-2\">Summary</h3>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <p className=\"flex justify-between\">\r\n                <span>Total Predictions:</span>\r\n                <span>{summary.total}</span>\r\n              </p>\r\n              <p className=\"flex justify-between\">\r\n                <span>Benign:</span>\r\n                <span>{summary.benign}</span>\r\n              </p>\r\n              <p className=\"flex justify-between\">\r\n                <span>Anomaly:</span>\r\n                <span>{summary.anomaly}</span>\r\n              </p>\r\n              <p className=\"flex justify-between\">\r\n                <span>Suspicious Benign:</span>\r\n                <span>{summary.suspiciousBenign}</span>\r\n              </p>\r\n              <p className=\"flex justify-between\">\r\n                <span>Avg Risk:</span>\r\n                <span>{(summary.avgRisk * 100).toFixed(1)}%</span>\r\n              </p>\r\n            </div>\r\n\r\n            {/* ✅ Graph */}\r\n            <div className=\"mt-6\">\r\n              <Bar data={chartData} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* RIGHT PANEL - TABLE (unchanged) */}\r\n        {/* Keep your original table rendering as is */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}